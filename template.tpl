___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.

___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "TimeOne - Global Tag",
  "brand": {
    "id": "brand_dummy",
    "displayName": "TimeOne",
    "thumbnail": "data:image/png;base64,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"
  },
  "description": "Le Global Tag TimeOne vous permet de bénéficier de l'ensemble des technologies de tracking pour vos campagnes.",
  "categories": ["TAG_MANAGEMENT", "ADVERTISING"],
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "tagID",
    "help": "Ce paramètre est obligatoire. Il vous est communiqué par l'équipe TimeOne.",
    "displayName": "Identifiant du tag",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      },
      {
        "type": "NUMBER"
      }
    ]
  },
  {
    "type": "TEXT",
    "help": "Indiquez ici votre propre identifiant faisant référence à la catégorie/thématique de la page visitée.",
    "name": "categoryID",
    "displayName": "Identifiant de la catégorie de la page visitée",
    "simpleValueType": true
  },
  {
    "type": "TEXT",
    "help": "Indiquez ici votre propre identifiant faisant référence au produit de la page visitée.",
    "name": "productID",
    "displayName": "Identifiant du produit de la page visitée",
    "simpleValueType": true
  },
  {
    "type": "TEXT",
    "help": "Indiquez ici la liste de vos identifiants de produits contenu dans le panier de l'internaute séparés par des points-virgules.",
    "name": "cartProductsID",
    "displayName": "Liste des identifiants produit dans le panier",
    "simpleValueType": true
  },
  {
    "type": "TEXT",
    "help": "Indiquez ici le montant total du panier sans inclure les frais de port.",
    "name": "cartAmount",
    "displayName": "Montant du panier",
    "simpleValueType": true
  },
  {
    "type": "TEXT",
    "help": "Indiquez ici votre propre identifiant faisant référence à la commande de l'internaute.",
    "name": "orderID",
    "displayName": "Identifiant de la commande",
    "simpleValueType": true
  },
  {
    "type": "TEXT",
    "help": "Indiquez ici votre propre identifiant faisant référence à l'email du client encodé en SHA256.",
    "name": "HashClientSHA256",
    "displayName": "Identifiant Cross-Device",
    "simpleValueType": true
  }
]


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "__dot"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://u.logbor.com/p/*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const injectScript = require('injectScript');
const createQueue = require('createQueue');
const __dotPush = createQueue('__dot');
__dotPush({
  'categoryID': data.categoryID,
  'productID': data.productID,
  'cartProductsID': data.cartProductsID,
  'cartAmount': data.cartAmount,
  'orderID': data.orderID,
});

injectScript('https://u.logbor.com/p/?i='+data.tagID+'&n=__dot', data.gtmOnSuccess, data.gtmOnFailure);


___NOTES___

Created on 19/08/2019 à 09:33:22
